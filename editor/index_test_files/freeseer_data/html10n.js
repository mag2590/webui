window.html10n=function(window,document,undefined){function interceptConsole(a){if(!console)return function(){};var b=console[a];return b.bind?b.bind(console):function(){var a=Array.prototype.slice.apply(arguments).join(" ");b(a)}}function Loader(a){this.resources=a,this.cache={},this.langs={}}function getPluralRules(a){function c(a,b){return b.indexOf(a)!==-1}function d(a,b,c){return b<=a&&a<=c}var b={af:3,ak:4,am:4,ar:1,asa:3,az:0,be:11,bem:3,bez:3,bg:3,bh:4,bm:0,bn:3,bo:0,br:20,brx:3,bs:11,ca:3,cgg:3,chr:3,cs:12,cy:17,da:3,de:3,dv:3,dz:0,ee:3,el:3,en:3,eo:3,es:3,et:3,eu:3,fa:0,ff:5,fi:3,fil:4,fo:3,fr:5,fur:3,fy:3,ga:8,gd:24,gl:3,gsw:3,gu:3,guw:4,gv:23,ha:3,haw:3,he:2,hi:4,hr:11,hu:0,id:0,ig:0,ii:0,is:3,it:3,iu:7,ja:0,jmc:3,jv:0,ka:0,kab:5,kaj:3,kcg:3,kde:0,kea:0,kk:3,kl:3,km:0,kn:0,ko:0,ksb:3,ksh:21,ku:3,kw:7,lag:18,lb:3,lg:3,ln:4,lo:0,lt:10,lv:6,mas:3,mg:4,mk:16,ml:3,mn:3,mo:9,mr:3,ms:0,mt:15,my:0,nah:3,naq:7,nb:3,nd:3,ne:3,nl:3,nn:3,no:3,nr:3,nso:4,ny:3,nyn:3,om:3,or:3,pa:3,pap:3,pl:13,ps:3,pt:3,rm:3,ro:9,rof:3,ru:11,rwk:3,sah:0,saq:3,se:7,seh:3,ses:0,sg:0,sh:11,shi:19,sk:12,sl:14,sma:7,smi:7,smj:7,smn:7,sms:7,sn:3,so:3,sq:3,sr:11,ss:3,ssy:3,st:3,sv:3,sw:3,syr:3,ta:3,te:3,teo:3,th:0,ti:4,tig:3,tk:3,tl:4,tn:3,to:0,tr:0,ts:3,tzm:22,uk:11,ur:3,ve:3,vi:0,vun:3,wa:4,wae:3,wo:0,xh:3,xog:3,yo:0,zh:0,zu:3},e={0:function(a){return"other"},1:function(a){return d(a%100,3,10)?"few":a===0?"zero":d(a%100,11,99)?"many":a==2?"two":a==1?"one":"other"},2:function(a){return a!==0&&a%10===0?"many":a==2?"two":a==1?"one":"other"},3:function(a){return a==1?"one":"other"},4:function(a){return d(a,0,1)?"one":"other"},5:function(a){return d(a,0,2)&&a!=2?"one":"other"},6:function(a){return a===0?"zero":a%10==1&&a%100!=11?"one":"other"},7:function(a){return a==2?"two":a==1?"one":"other"},8:function(a){return d(a,3,6)?"few":d(a,7,10)?"many":a==2?"two":a==1?"one":"other"},9:function(a){return a===0||a!=1&&d(a%100,1,19)?"few":a==1?"one":"other"},10:function(a){return d(a%10,2,9)&&!d(a%100,11,19)?"few":a%10==1&&!d(a%100,11,19)?"one":"other"},11:function(a){return d(a%10,2,4)&&!d(a%100,12,14)?"few":a%10===0||d(a%10,5,9)||d(a%100,11,14)?"many":a%10==1&&a%100!=11?"one":"other"},12:function(a){return d(a,2,4)?"few":a==1?"one":"other"},13:function(a){return d(a%10,2,4)&&!d(a%100,12,14)?"few":a!=1&&d(a%10,0,1)||d(a%10,5,9)||d(a%100,12,14)?"many":a==1?"one":"other"},14:function(a){return d(a%100,3,4)?"few":a%100==2?"two":a%100==1?"one":"other"},15:function(a){return a===0||d(a%100,2,10)?"few":d(a%100,11,19)?"many":a==1?"one":"other"},16:function(a){return a%10==1&&a!=11?"one":"other"},17:function(a){return a==3?"few":a===0?"zero":a==6?"many":a==2?"two":a==1?"one":"other"},18:function(a){return a===0?"zero":d(a,0,2)&&a!==0&&a!=2?"one":"other"},19:function(a){return d(a,2,10)?"few":d(a,0,1)?"one":"other"},20:function(a){return(d(a%10,3,4)||a%10==9)&&!(d(a%100,10,19)||d(a%100,70,79)||d(a%100,90,99))?"few":a%1e6===0&&a!==0?"many":a%10==2&&!c(a%100,[12,72,92])?"two":a%10==1&&!c(a%100,[11,71,91])?"one":"other"},21:function(a){return a===0?"zero":a==1?"one":"other"},22:function(a){return d(a,0,1)||d(a,11,99)?"one":"other"},23:function(a){return d(a%10,1,2)||a%20===0?"one":"other"},24:function(a){return d(a,3,10)||d(a,13,19)?"few":c(a,[2,12])?"two":c(a,[1,11])?"one":"other"}},f=b[a.replace(/-.*$/,"")];return f in e?e[f]:(consoleWarn("plural form unknown for ["+a+"]"),function(){return"other"})}function asyncForEach(a,b,c){var d=0,e=a.length;b(a[d],d,function f(g){g&&consoleLog(g),d++;if(d<e)return b(a[d],d,f);c()})}function getTranslatableChildren(a){if(!document.querySelectorAll){if(!a)return[];var b=a.getElementsByTagName("*"),c=[];for(var d=0,e=b.length;d<e;d++)b[d].getAttribute("data-l10n-id")&&c.push(b[d]);return c}return a.querySelectorAll("*[data-l10n-id]")}var console=window.console,consoleLog=interceptConsole("log"),consoleWarn=interceptConsole("warn"),consoleError=interceptConsole("warn");Array.prototype.indexOf||(Array.prototype.indexOf=function(a){"use strict";if(this==null)throw new TypeError;var b=Object(this),c=b.length>>>0;if(c===0)return-1;var d=0;arguments.length>1&&(d=Number(arguments[1]),d!=d?d=0:d!=0&&d!=Infinity&&d!=-Infinity&&(d=(d>0||-1)*Math.floor(Math.abs(d))));if(d>=c)return-1;var e=d>=0?d:Math.max(c-Math.abs(d),0);for(;e<c;e++)if(e in b&&b[e]===a)return e;return-1});var MicroEvent=function(){};MicroEvent.prototype={bind:function(a,b){this._events=this._events||{},this._events[a]=this._events[a]||[],this._events[a].push(b)},unbind:function(a,b){this._events=this._events||{};if(a in this._events==0)return;this._events[a].splice(this._events[a].indexOf(b),1)},trigger:function(a){this._events=this._events||{};if(a in this._events==0)return;for(var b=0;b<this._events[a].length;b++)this._events[a][b].apply(this,Array.prototype.slice.call(arguments,1))}},MicroEvent.mixin=function(a){var b=["bind","unbind","trigger"];if(!a)return;for(var c=0;c<b.length;c++)a[b[c]]=MicroEvent.prototype[b[c]]},Loader.prototype.load=function(a,b){if(this.langs[a])return b();if(this.resources.length>0){var c=0;for(var d=0,e=this.resources.length;d<e;d++)this.fetch(this.resources[d],a,function(a){c++,a&&consoleWarn(a);if(c<e)return;b&&b()})}},Loader.prototype.fetch=function(a,b,c){var d=this;if(this.cache[a]){this.parse(b,a,this.cache[a],c);return}var e=new XMLHttpRequest;e.open("GET",a,!0),e.overrideMimeType&&e.overrideMimeType("application/json; charset=utf-8"),e.onreadystatechange=function(){if(e.readyState==4)if(e.status==200||e.status===0){var f=JSON.parse(e.responseText);d.cache[a]=f,d.parse(b,a,f,c)}else c(new Error("Failed to load "+a))},e.send(null)},Loader.prototype.parse=function(a,b,c,d){if("object"!=typeof c){d(new Error("A file couldn't be parsed as json."));return}if(!c[a]){d(new Error("Couldn't find translations for "+a));return}if("string"==typeof c[a]){var e=c[a];c[a].indexOf("http")!=0&&c[a].indexOf("/")!=0&&(e=b+"/../"+c[a]),this.fetch(e,a,d);return}if("object"!=typeof c[a]){d(new Error("Translations should be specified as JSON objects!"));return}this.langs[a]=c[a],d()};var html10n={language:null};return MicroEvent.mixin(html10n),html10n.macros={},html10n.rtl=["ar","dv","fa","ha","he","ks","ku","ps","ur","yi"],html10n.macros.plural=function(a,b,c,d){var e=parseFloat(d);if(isNaN(e))return c;this._pluralRules||(this._pluralRules=getPluralRules(html10n.language));var f="["+this._pluralRules(e)+"]";return e===0&&b+"[zero]"in a?c=a[b+"[zero]"]:e==1&&b+"[one]"in a?c=a[b+"[one]"]:e==2&&b+"[two]"in a?c=a[b+"[two]"]:b+f in a&&(c=a[b+f][prop]),c},html10n.localize=function(a){var b=this;"string"==typeof a&&(a=[a]);var c=0;a.forEach(function(b){if(!b)return;a[c++]=b,~b.indexOf("-")&&(a[c++]=b.substr(0,b.indexOf("-")))}),this.build(a,function(a,c){html10n.translations=c,html10n.translateElement(c),b.trigger("localized")})},html10n.translateElement=function(a,b){b=b||document.documentElement;var c=b?getTranslatableChildren(b):document.childNodes;for(var d=0,e=c.length;d<e;d++)this.translateNode(a,c[d]);this.translateNode(a,b)},html10n.get=function(a,b){function e(a,b){var d=/\{\{\s*([a-zA-Z\.]+)\s*\}\}/,e;while(e=d.exec(a)){if(!e||e.length<2)return a;var f=e[1],g="";if(f in b)g=b[f];else{if(!(f in c))return consoleWarn("Could not find argument {{"+f+"}}"),a;g=c[f]}a=a.substring(0,e.index)+g+a.substr(e.index+e[0].length)}return a}function f(a,b,d){var e=/\{\[\s*([a-zA-Z]+):([a-zA-Z]+)\s*\]\}/,f=e.exec(b);if(!f||!f.length)return b;var g=reMatch[1],h=reMatch[2];if(g in gMacros){var i;d&&h in d?i=d[h]:h in c&&(i=c[h]);var j=html10n.macros[g];return b=j(c,a,b,i),b}return b}var c=html10n.translations;if(!c)return consoleWarn("No translations available (yet)");if(!c[a])return consoleWarn("Could not find string "+a);var d=e(c[a],b);return f(a,d,b)},html10n.translateNode=function(translations,node){var str={};str.id=node.getAttribute("data-l10n-id");if(!str.id)return;if(!translations[str.id])return consoleWarn("Couldn't find translation key "+str.id);if(window.JSON)str.args=JSON.parse(node.getAttribute("data-l10n-args"));else try{str.args=eval(node.getAttribute("data-l10n-args"))}catch(e){consoleWarn("Couldn't parse args for "+str.id)}str.str=html10n.get(str.id,str.args);var prop,index=str.id.lastIndexOf("."),attrList={title:1,innerHTML:1,alt:1,textContent:1};index>0&&str.id.substr(index+1)in attrList?prop=str.id.substr(index+1):prop=document.body.textContent?"textContent":"innerText";if(node.children.length===0||prop!="textContent")node[prop]=str.str;else{var children=node.childNodes,found=!1;for(var i=0,n=children.length;i<n;i++)children[i].nodeType===3&&/\S/.test(children[i].textContent)&&(found?children[i].nodeValue="":(children[i].nodeValue=str.str,found=!0));found||consoleWarn("Unexpected error: could not translate element content for key "+str.id,node)}},html10n.build=function(a,b){var c=this,d={};asyncForEach(a,function(a,b,d){if(!a)return d();c.loader.load(a,d)},function(){var e;a.reverse();for(var f=0,g=a.length;f<g;f++){e=a[f];if(!e||!(e in c.loader.langs))continue;for(var h in c.loader.langs[e])d[h]=c.loader.langs[e][h];c.language=e}b(null,d)})},html10n.getLanguage=function(){return this.language},html10n.getDirection=function(){if(!this.language)return;var a=this.language.indexOf("-")==-1?this.language:this.language.substr(0,this.language.indexOf("-"));return html10n.rtl.indexOf(a)==-1?"ltr":"rtl"},html10n.index=function(){var a=document.getElementsByTagName("link"),b=[];for(var c=0,d=a.length;c<d;c++){if(a[c].type!="application/l10n+json")continue;b.push(a[c].href)}this.loader=new Loader(b),this.trigger("indexed")},document.addEventListener?document.addEventListener("DOMContentLoaded",function(){html10n.index()},!1):window.attachEvent&&window.attachEvent("onload",function(){html10n.index()},!1),window._===undefined&&(window._=html10n.get),html10n}(window,document)