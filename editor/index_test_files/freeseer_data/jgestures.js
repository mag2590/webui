(function(a){function b(a){a.startMove=a.startMove?a.startMove:{startX:null,startY:null,timestamp:null};var b=(new Date).getTime(),c,d;return a.touches&&(d=[{lastX:a.deltaX,lastY:a.deltaY,moved:null,startX:a.screenX-a.startMove.screenX,startY:a.screenY-a.startMove.screenY}],c={vector:a.vector||null,orientation:window.orientation||null,lastX:d[0].lastX>0?1:d[0].lastX<0?-1:0,lastY:d[0].lastY>0?1:d[0].lastY<0?-1:0,startX:d[0].startX>0?1:d[0].startX<0?-1:0,startY:d[0].startY>0?1:d[0].startY<0?-1:0},d[0].moved=Math.sqrt(Math.pow(Math.abs(d[0].startX),2)+Math.pow(Math.abs(d[0].startY),2))),{type:a.type||null,originalEvent:a.event||null,delta:d||null,direction:c||{orientation:window.orientation||null,vector:a.vector||null},duration:a.duration?a.duration:a.startMove.timestamp?b-a.timestamp:null,rotation:a.rotation||null,scale:a.scale||null,description:a.description||[a.type,":",a.touches,":",d[0].lastX!=0?d[0].lastX>0?"right":"left":"steady",":",d[0].lastY!=0?d[0].lastY>0?"down":"up":"steady"].join("")}}function c(b){var c=["landscape:clockwise:","portrait:default:","landscape:counterclockwise:","portrait:upsidedown:"];a(window).triggerHandler("orientationchange",{direction:{orientation:window.orientation},description:["orientationchange:",c[window.orientation/90+1],window.orientation].join("")})}function d(c){var d,e=jQuery(window),f=e.data("ojQueryGestures"),g=a.jGestures.defaults.thresholdShake,h=f.oDeviceMotionLastDevicePosition||{accelerationIncludingGravity:{x:0,y:0,z:0},shake:{eventCount:0,intervalsPassed:0,intervalsFreeze:0},shakeleftright:{eventCount:0,intervalsPassed:0,intervalsFreeze:0},shakefrontback:{eventCount:0,intervalsPassed:0,intervalsFreeze:0},shakeupdown:{eventCount:0,intervalsPassed:0,intervalsFreeze:0}},i={accelerationIncludingGravity:{x:c.accelerationIncludingGravity.x,y:c.accelerationIncludingGravity.y,z:c.accelerationIncludingGravity.z},shake:{eventCount:h.shake.eventCount,intervalsPassed:h.shake.intervalsPassed,intervalsFreeze:h.shake.intervalsFreeze},shakeleftright:{eventCount:h.shakeleftright.eventCount,intervalsPassed:h.shakeleftright.intervalsPassed,intervalsFreeze:h.shakeleftright.intervalsFreeze},shakefrontback:{eventCount:h.shakefrontback.eventCount,intervalsPassed:h.shakefrontback.intervalsPassed,intervalsFreeze:h.shakefrontback.intervalsFreeze},shakeupdown:{eventCount:h.shakeupdown.eventCount,intervalsPassed:h.shakeupdown.intervalsPassed,intervalsFreeze:h.shakeupdown.intervalsFreeze}},j,k,l;for(d in f){switch(d){case"shake":case"shakeleftright":case"shakefrontback":case"shakeupdown":j=[],k=[],j.push(d);if(++i[d].intervalsFreeze>g.freezeShakes&&i[d].intervalsFreeze<2*g.freezeShakes)break;i[d].intervalsFreeze=0,i[d].intervalsPassed++,(d==="shake"||d==="shakeleftright")&&(i.accelerationIncludingGravity.x>g.leftright.sensitivity||i.accelerationIncludingGravity.x<-1*g.leftright.sensitivity)&&(j.push("leftright"),j.push("x-axis")),(d==="shake"||d==="shakefrontback")&&(i.accelerationIncludingGravity.y>g.frontback.sensitivity||i.accelerationIncludingGravity.y<-1*g.frontback.sensitivity)&&(j.push("frontback"),j.push("y-axis")),(d==="shake"||d==="shakeupdown")&&(i.accelerationIncludingGravity.z+9.81>g.updown.sensitivity||i.accelerationIncludingGravity.z+9.81<-1*g.updown.sensitivity)&&(j.push("updown"),j.push("z-axis")),j.length>1&&(++i[d].eventCount==g.requiredShakes&&i[d].intervalsPassed<g.freezeShakes?(e.triggerHandler(d,b({type:d,description:j.join(":"),event:c,duration:i[d].intervalsPassed*5})),i[d].eventCount=0,i[d].intervalsPassed=0,i[d].intervalsFreeze=g.freezeShakes+1):i[d].eventCount==g.requiredShakes&&i[d].intervalsPassed>g.freezeShakes&&(i[d].eventCount=0,i[d].intervalsPassed=0))}l={},l.oDeviceMotionLastDevicePosition=i,e.data("ojQueryGestures",a.extend(!0,f,l))}}function e(b){var c=jQuery(b.currentTarget);c.triggerHandler(a.jGestures.events.touchstart,b),a.hasGestures?(b.currentTarget.addEventListener("touchmove",f,!1),b.currentTarget.addEventListener("touchend",g,!1)):(c.bind("mousemove",f),c.bind("mouseup",g));var d=c.data("ojQueryGestures"),e=b.touches?b.touches[0]:b,h={};h.oLastSwipemove={screenX:e.screenX,screenY:e.screenY,timestamp:(new Date).getTime()},h.oStartTouch={screenX:e.screenX,screenY:e.screenY,timestamp:(new Date).getTime()},c.data("ojQueryGestures",a.extend(!0,d,h))}function f(c){var d=jQuery(c.currentTarget),e=d.data("ojQueryGestures"),f=!!c.touches,g=f?c.changedTouches[0].screenX:c.screenX,h=f?c.changedTouches[0].screenY:c.screenY,i=e.oLastSwipemove,j=g-i.screenX,k=h-i.screenY,l;!e.oLastSwipemove||(l=b({type:"swipemove",touches:f?c.touches.length:"1",screenY:h,screenX:g,deltaY:k,deltaX:j,startMove:i,event:c,timestamp:i.timestamp}),d.triggerHandler(l.type,l));var m={},n=c.touches?c.touches[0]:c;m.oLastSwipemove={screenX:n.screenX,screenY:n.screenY,timestamp:(new Date).getTime()},d.data("ojQueryGestures",a.extend(!0,e,m))}function g(c){var d=jQuery(c.currentTarget),e=!!c.changedTouches,h=e?c.changedTouches.length:"1",i=e?c.changedTouches[0].screenX:c.screenX,j=e?c.changedTouches[0].screenY:c.screenY;d.triggerHandler(a.jGestures.events.touchendStart,c),a.hasGestures?(c.currentTarget.removeEventListener("touchmove",f,!1),c.currentTarget.removeEventListener("touchend",g,!1)):(d.unbind("mousemove",f),d.unbind("mouseup",g));var k=d.data("ojQueryGestures"),l=Math.abs(k.oStartTouch.screenX-i)>a.jGestures.defaults.thresholdMove||Math.abs(k.oStartTouch.screenY-j)>a.jGestures.defaults.thresholdMove?!0:!1,m=Math.abs(k.oStartTouch.screenX-i)>a.jGestures.defaults.thresholdSwipe||Math.abs(k.oStartTouch.screenY-j)>a.jGestures.defaults.thresholdSwipe?!0:!1,n,o,p,q,r,s,t=["zero","one","two","three","four"],u;for(n in k){o=k.oStartTouch,p={},i=e?c.changedTouches[0].screenX:c.screenX,j=e?c.changedTouches[0].screenY:c.screenY,q=i-o.screenX,r=j-o.screenY,s=b({type:"swipe",touches:h,screenY:j,screenX:i,deltaY:r,deltaX:q,startMove:o,event:c,timestamp:o.timestamp}),u=!1;switch(n){case"swipeone":if(e===!1&&h==1&&l===!1)break;if(e===!1||h==1&&l===!0&&m===!0)u=!0,s.type=["swipe",t[h]].join(""),d.triggerHandler(s.type,s);break;case"swipetwo":e&&h==2&&l===!0&&m===!0&&(u=!0,s.type=["swipe",t[h]].join(""),d.triggerHandler(s.type,s));break;case"swipethree":e&&h==3&&l===!0&&m===!0&&(u=!0,s.type=["swipe",t[h]].join(""),d.triggerHandler(s.type,s));break;case"swipefour":e&&h==4&&l===!0&&m===!0&&(u=!0,s.type=["swipe",t[h]].join(""),d.triggerHandler(s.type,s));break;case"swipeup":case"swiperightup":case"swiperight":case"swiperightdown":case"swipedown":case"swipeleftdown":case"swipeleft":case"swipeleftup":e&&l===!0&&m===!0&&(u=!0,s.type=["swipe",s.delta[0].lastX!=0?s.delta[0].lastX>0?"right":"left":"",s.delta[0].lastY!=0?s.delta[0].lastY>0?"down":"up":""].join(""),d.triggerHandler(s.type,s));break;case"tapone":case"taptwo":case"tapthree":case"tapfour":l!==!0&&u!==!0&&t[h]==n.slice(3)&&(s.description=["tap",t[h]].join(""),s.type=["tap",t[h]].join(""),d.triggerHandler(s.type,s))}var v={};d.data("ojQueryGestures",a.extend(!0,k,v)),d.data("ojQueryGestures",a.extend(!0,k,v))}d.triggerHandler(a.jGestures.events.touchendProcessed,c)}function h(b){var c=jQuery(b.currentTarget);c.triggerHandler(a.jGestures.events.gesturestart,b);var d=c.data("ojQueryGestures"),e={};e.oStartTouch={timestamp:(new Date).getTime()},c.data("ojQueryGestures",a.extend(!0,d,e))}function i(c){var d=jQuery(c.currentTarget),e,f,g,h,i=d.data("ojQueryGestures"),j;for(j in i)switch(j){case"pinch":e=c.scale;if(e<1&&e%1<1-a.jGestures.defaults.thresholdPinchclose||e>1&&e%1>a.jGestures.defaults.thresholdPinchopen)f=e<1?-1:1,h=b({type:"pinch",scale:e,touches:null,startMove:i.oStartTouch,event:c,timestamp:i.oStartTouch.timestamp,vector:f,description:["pinch:",f,":",e<1?"close":"open"].join("")}),d.triggerHandler(h.type,h);break;case"rotate":e=c.rotation;if(e<1&&-1*e>a.jGestures.defaults.thresholdRotateccw||e>1&&e>a.jGestures.defaults.thresholdRotatecw)f=e<1?-1:1,h=b({type:"rotate",rotation:e,touches:null,startMove:i.oStartTouch,event:c,timestamp:i.oStartTouch.timestamp,vector:f,description:["rotate:",f,":",e<1?"counterclockwise":"clockwise"].join("")}),d.triggerHandler(h.type,h)}}function j(c){var d=jQuery(c.currentTarget);d.triggerHandler(a.jGestures.events.gestureendStart,c);var e,f=d.data("ojQueryGestures"),g;for(g in f)switch(g){case"pinchclose":e=c.scale,e<1&&e%1<1-a.jGestures.defaults.thresholdPinchclose&&d.triggerHandler("pinchclose",b({type:"pinchclose",scale:e,vector:-1,touches:null,startMove:f.oStartTouch,event:c,timestamp:f.oStartTouch.timestamp,description:"pinch:-1:close"}));break;case"pinchopen":e=c.scale,e>1&&e%1>a.jGestures.defaults.thresholdPinchopen&&d.triggerHandler("pinchopen",b({type:"pinchopen",scale:e,vector:1,touches:null,startMove:f.oStartTouch,event:c,timestamp:f.oStartTouch.timestamp,description:"pinch:+1:open"}));break;case"rotatecw":e=c.rotation,e>1&&e>a.jGestures.defaults.thresholdRotatecw&&d.triggerHandler("rotatecw",b({type:"rotatecw",rotation:e,vector:1,touches:null,startMove:f.oStartTouch,event:c,timestamp:f.oStartTouch.timestamp,description:"rotate:+1:clockwise"}));break;case"rotateccw":e=c.rotation,e<1&&-1*e>a.jGestures.defaults.thresholdRotateccw&&d.triggerHandler("rotateccw",b({type:"rotateccw",rotation:e,vector:-1,touches:null,startMove:f.oStartTouch,event:c,timestamp:f.oStartTouch.timestamp,description:"rotate:-1:counterclockwise"}))}d.triggerHandler(a.jGestures.events.gestureendProcessed,c)}a.jGestures={},a.jGestures.defaults={},a.jGestures.defaults.thresholdShake={requiredShakes:10,freezeShakes:100,frontback:{sensitivity:10},leftright:{sensitivity:10},updown:{sensitivity:10}},a.jGestures.defaults.thresholdPinchopen=.05,a.jGestures.defaults.thresholdPinchmove=.05,a.jGestures.defaults.thresholdPinch=.05,a.jGestures.defaults.thresholdPinchclose=.05,a.jGestures.defaults.thresholdRotatecw=5,a.jGestures.defaults.thresholdRotateccw=5,a.jGestures.defaults.thresholdMove=20,a.jGestures.defaults.thresholdSwipe=100,a.jGestures.data={},a.jGestures.data.capableDevicesInUserAgentString=["iPad","iPhone","iPod","Mobile Safari"],a.jGestures.data.hasGestures=function(){var b;for(b=0;b<a.jGestures.data.capableDevicesInUserAgentString.length;b++)if(navigator.userAgent.indexOf(a.jGestures.data.capableDevicesInUserAgentString[b])!==-1)return!0;return!1}(),a.hasGestures=a.jGestures.data.hasGestures,a.jGestures.events={touchstart:"jGestures.touchstart",touchendStart:"jGestures.touchend;start",touchendProcessed:"jGestures.touchend;processed",gesturestart:"jGestures.gesturestart",gestureendStart:"jGestures.gestureend;start",gestureendProcessed:"jGestures.gestureend;processed"},jQuery.each({orientationchange_orientationchange01:"orientationchange",gestureend_pinchopen01:"pinchopen",gestureend_pinchclose01:"pinchclose",gestureend_rotatecw01:"rotatecw",gestureend_rotateccw01:"rotateccw",gesturechange_pinch01:"pinch",gesturechange_rotate01:"rotate",touchstart_swipe13:"swipemove",touchstart_swipe01:"swipeone",touchstart_swipe02:"swipetwo",touchstart_swipe03:"swipethree",touchstart_swipe04:"swipefour",touchstart_swipe05:"swipeup",touchstart_swipe06:"swiperightup",touchstart_swipe07:"swiperight",touchstart_swipe08:"swiperightdown",touchstart_swipe09:"swipedown",touchstart_swipe10:"swipeleftdown",touchstart_swipe11:"swipeleft",touchstart_swipe12:"swipeleftup",touchstart_tap01:"tapone",touchstart_tap02:"taptwo",touchstart_tap03:"tapthree",touchstart_tap04:"tapfour",devicemotion_shake01:"shake",devicemotion_shake02:"shakefrontback",devicemotion_shake03:"shakeleftright",devicemotion_shake04:"shakeupdown"},function(b,k){jQuery.event.special[k]={setup:function(){var f=b.split("_"),g=f[0],k=f[1].slice(0,f[1].length-2),l=jQuery(this),m,n;if(!l.data("ojQueryGestures")||!l.data("ojQueryGestures")[g]){m=l.data("ojQueryGestures")||{},n={},n[g]=!0,a.extend(!0,m,n),l.data("ojQueryGestures",m);if(a.hasGestures)switch(k){case"orientationchange":l.get(0).addEventListener("orientationchange",c,!1);break;case"shake":case"shakefrontback":case"shakeleftright":case"shakeupdown":case"tilt":l.get(0).addEventListener("devicemotion",d,!1);break;case"tap":case"swipe":case"swipeup":case"swiperightup":case"swiperight":case"swiperightdown":case"swipedown":case"swipeleftdown":case"swipeleft":l.get(0).addEventListener("touchstart",e,!1);break;case"pinchopen":case"pinchclose":case"rotatecw":case"rotateccw":l.get(0).addEventListener("gesturestart",h,!1),l.get(0).addEventListener("gestureend",j,!1);break;case"pinch":case"rotate":l.get(0).addEventListener("gesturestart",h,!1),l.get(0).addEventListener("gesturechange",i,!1)}else switch(k){case"tap":case"swipe":l.bind("mousedown",e);break;case"orientationchange":case"pinchopen":case"pinchclose":case"rotatecw":case"rotateccw":case"pinch":case"rotate":case"shake":case"tilt":}}return!1},add:function(a){var b=jQuery(this),c=b.data("ojQueryGestures");return c[a.type]={originalType:a.type},!1},remove:function(a){var b=jQuery(this),c=b.data("ojQueryGestures");return c[a.type]=!1,b.data("ojQueryGestures",c),!1},teardown:function(){var k=b.split("_"),l=k[0],m=k[1].slice(0,k[1].length-2),n=jQuery(this),o,p;if(!n.data("ojQueryGestures")||!n.data("ojQueryGestures")[l]){o=n.data("ojQueryGestures")||{},p={},p[l]=!1,a.extend(!0,o,p),n.data("ojQueryGestures",o);if(a.hasGestures)switch(m){case"orientationchange":n.get(0).removeEventListener("orientationchange",c,!1);break;case"shake":case"shakefrontback":case"shakeleftright":case"shakeupdown":case"tilt":n.get(0).removeEventListener("devicemotion",d,!1);break;case"tap":case"swipe":case"swipeup":case"swiperightup":case"swiperight":case"swiperightdown":case"swipedown":case"swipeleftdown":case"swipeleft":case"swipeleftup":n.get(0).removeEventListener("touchstart",e,!1),n.get(0).removeEventListener("touchmove",f,!1),n.get(0).removeEventListener("touchend",g,!1);break;case"pinchopen":case"pinchclose":case"rotatecw":case"rotateccw":n.get(0).removeEventListener("gesturestart",h,!1),n.get(0).removeEventListener("gestureend",j,!1);break;case"pinch":case"rotate":n.get(0).removeEventListener("gesturestart",h,!1),n.get(0).removeEventListener("gesturechange",i,!1)}else switch(m){case"tap":case"swipe":n.unbind("mousedown",e),n.unbind("mousemove",f),n.unbind("mouseup",g);break;case"orientationchange":case"pinchopen":case"pinchclose":case"rotatecw":case"rotateccw":case"pinch":case"rotate":case"shake":case"tilt":}}return!1}}})})(jQuery)